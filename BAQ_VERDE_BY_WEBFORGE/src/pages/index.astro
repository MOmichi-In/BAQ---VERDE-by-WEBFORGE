---
import Layout from "../layouts/Layout.astro";
import BannerAbout from "../components/home_sections/About.astro";
import TitleSection from "../components/home_sections/Section.astro";
import Card from "../components/ambiental_cards/ambiental_card.astro";
import { cardsData } from "../lib/card_ambiental_data.js";
---

<Layout>
  <BannerAbout />
  <TitleSection />

  <section class="cards-section">
    <div class="cards-grid">
      {cardsData.map((card) => (
        <Card title={card.title} description={card.description} />
      ))}
    </div>
  </section>

  <!-- ✅ Modal global -->
  <div id="global-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
      <button class="modal-close" id="modal-close">✕</button>
      <h2 id="modal-title" class="modal-title"></h2>
      <p id="modal-description" class="modal-description"></p>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const modal = document.getElementById('global-modal');
      const titleEl = document.getElementById('modal-title');
      const descEl = document.getElementById('modal-description');
      const closeBtn = document.getElementById('modal-close');

      // Abrir desde cualquier botón con data-description
      document.querySelectorAll('[data-description]').forEach(btn => {
        btn.addEventListener('click', () => {
          titleEl.textContent = btn.dataset.title;
          descEl.textContent = btn.dataset.description;
          modal.style.display = 'flex';
        });
      });

      closeBtn.onclick = () => modal.style.display = 'none';
      modal.onclick = (e) => { if (e.target === modal) modal.style.display = 'none'; };
    });
  </script>
</Layout>

<style>
.cards-section {
  padding: var(--spacing-xxl) 0; /* antes 8rem */
  background-color: var(--bv-blanco);
  background-image: url("/images/svg/flores.svg");
  background-repeat: no-repeat;
  background-position: center top;
  background-size: cover;
}

.cards-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: var(--spacing-xl); /* antes 2rem */
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 var(--spacing-md);
}
</style>