---
/* ===================================
   LAYOUT.ASTRO - Plantilla base de las landing del Observatorio Ambiental
   =================================== */

const { title = "Observatorio Ambiental" } = Astro.props;
const year = new Date().getFullYear();

// === Selección aleatoria del fondo ===
const images = [
  "/images/bg/fondolayout1.jpg",
  "/images/bg/fondolayout2.jpg"
];
const heroImage = images[Math.floor(Math.random() * images.length)];

/* === IMPORTACIÓN DE ESTILOS === */
import "../styles/layout.css";
import "../styles/global.css";
---


<!doctype html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="preload" as="image" href={heroImage} />
        <title>{title}</title>
    </head>
    <body>
        <!-- ========================
         BARRAS INFORMATIVAS SUPERIORES (NO STICKY)
         ======================== -->
        <div class="top-info-bars">
            <!-- Barra 1: GOV.CO -->
            <div class="top-bar gov-bar">
                <a href="https://www.gov.co" target="_blank">
                    <img src="/images/govco.webp" alt="Logo GOV.CO" />
                </a>
            </div>

            <!-- Barra 2: Alcaldía de Barranquilla -->
            <div class="top-bar alcaldia-bar">
                <a href="https://www.barranquilla.gov.co" target="_blank">
                    <img src="/images/alcaldia.png" alt="Logo Alcaldía de Barranquilla" />
                </a>
            </div>
        </div>

        <!-- ========================
         NAVEGACIÓN PRINCIPAL (STICKY)
         ======================== -->
        <div class="header" id="mainNav">
            <div class="container-full">
                <div class="logo">
                    <img src="/images/logo.png" alt="Observatorio Ambiental" />
                </div>
                <nav class="nav">
                    <a href="/">Inicio</a>
                    <a href="/participation">Participacion</a>
                    <a href="/maps">GeoPortal</a>
                    <a href="/news">Noticias</a>
                    <a href="/documents">Documentos</a>
                </nav>
            </div>
        </div>

        <!-- ========================
         HERO SECTION
         ======================== -->
        <section class="hero-simple">
            <img
                src={heroImage}
                alt={title}
                class="hero-image"
                loading="eager"
                fetchpriority="high"
            />
            <div class="hero-overlay"></div>
            <div class="hero-content">
                <h1>{title}</h1>
            </div>
        </section>

        <!-- ========================
         CONTENIDO PRINCIPAL (INYECTADO)
         ======================== -->
        <main>
            <slot />
        </main>

        <!-- ========================
         PIE DE PÁGINA (FOOTER)
         ======================== -->
        <footer class="footer">
            <div class="container">
                <!-- Logos institucionales -->
                <div class="footer-institutional-bar">
                    <a href="https://www.gov.co" target="_blank" rel="noopener">
                        <img src="/images/govco.webp" alt="Logo GOV.CO" />
                    </a>
                    <a href="https://www.barranquilla.gov.co" target="_blank" rel="noopener">
                        <img src="/images/alcaldia.png" alt="Logo Alcaldía de Barranquilla" />
                    </a>
                </div>

                <!-- Cuadrícula de información del footer -->
                <div class="footer-grid">
                    <!-- Columna: Logo y datos de contacto -->
                    <div class="footer-col logo-col">
                        <div class="logo-footer">
                            <img src="/images/logo.png" alt="Observatorio Ambiental" />
                        </div>
                        <p>
                            Observatorio Ambiental<br />
                            Barranquilla, Colombia<br />
                            info@observatorioambiental.gov.co
                        </p>
                        <div class="social-links">
                            <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                            <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                            <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        </div>
                    </div>

                    <!-- Columna: Secciones del sitio -->
                    <div class="footer-col">
                        <h4>Secciones</h4>
                        <ul>
                            <li><a href="/">Inicio</a></li>
                            <li><a href="/participation">Participación</a></li>
                            <li><a href="/maps">GeoPortal</a></li>
                            <li><a href="/news">Noticias</a></li>
                            <li><a href="/documents">Documentos</a></li>
                        </ul>
                    </div>

                    <!-- Columna: Recursos externos e internos -->
                  

                    <!-- Columna: Información de contacto y emergencias -->
                    <div class="footer-col">
                        <h4>Contacto</h4>
                        <ul>
                            <li>Email: contacto@observatorioambiental.gov.co</li>
                            <li>Tel: (605) 311 2470</li>
                        </ul>
                    </div>
                </div>

                <!-- Pie legal -->
                <div class="footer-bottom">
                    <p>
                        &copy; {year} Observatorio Ambiental – Alcaldía de Barranquilla. Todos los derechos
                        reservados.
                    </p>
                </div>
            </div>
        </footer>

        <!-- ========================
         COMPORTAMIENTO DINÁMICO (JAVASCRIPT)
         ======================== -->
        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const header = document.querySelector(".header");
                const scrollThreshold = 150;

                function updateHeader() {
                    if (window.scrollY > scrollThreshold) {
                        header?.classList.add("scrolled");
                        header?.classList.remove("at-top");
                    } else {
                        header?.classList.remove("scrolled");
                        header?.classList.add("at-top");
                    }
                }

                window.addEventListener("scroll", updateHeader);
                updateHeader();
            });
        </script>
    </body>
</html>
